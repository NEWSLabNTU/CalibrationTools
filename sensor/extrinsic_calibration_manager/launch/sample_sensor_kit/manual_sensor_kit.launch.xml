<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="vehicle_id" default="default"/> <!-- You can update with your own vehicle_id -->

    <let name="sensor_model" value="sample_sensor_kit"/> <!-- You can update with your own sensor model -->
    <let name="parent_frame" value="sensor_kit_base_link"/>

    <!-- extrinsic_calibration_client -->
    <arg name="src_yaml" default="$(find-pkg-share individual_params)/config/$(var vehicle_id)/$(var sensor_model)/sensor_kit_calibration.yaml"/>
    <arg name="dst_yaml" default="$(env HOME)/sensor_kit_calibration.yaml"/>

    <node pkg="extrinsic_calibration_client" exec="extrinsic_calibration_client" name="extrinsic_calibration_client" output="screen">
        <param name="src_path" value="$(var src_yaml)"/>
        <param name="dst_path" value="$(var dst_yaml)"/>
    </node>

    <!-- extrinsic_calibration_manager -->
    <node pkg="extrinsic_calibration_manager" exec="extrinsic_calibration_manager" name="extrinsic_calibration_manager" output="screen">
        <param name="parent_frame" value="$(var parent_frame)"/>
        <!-- Please Update with your own sensor frames -->
        <param name="child_frames" value="
            [lidar,
            zedxm_camera_link]"/>
    </node>

    <node
        pkg="tf2_ros"
        exec="static_transform_publisher"
        name="static_transform_publisher"
        args="-0.01 0.025 0.016 -1.5708 0 -1.5708 zedxm_camera_link zedxm_left_camera_optical_frame"/>


    <!-- extrinsic_manual_calibrator -->
    <!-- Please create a launch for all sensors that you used. -->
    <include file="$(find-pkg-share extrinsic_manual_calibrator)/launch/calibrator.launch.xml">
        <arg name="ns" value="$(var parent_frame)/lidar"/>
        <arg name="parent_frame" value="$(var parent_frame)"/>
        <arg name="child_frame" value="lidar"/>
    </include>

    <include file="$(find-pkg-share extrinsic_manual_calibrator)/launch/calibrator.launch.xml">
        <arg name="ns" value="$(var parent_frame)/zedxm_camera_link"/>
        <arg name="parent_frame" value="$(var parent_frame)"/>
        <arg name="child_frame" value="zedxm_camera_link"/>
    </include>
</launch>
